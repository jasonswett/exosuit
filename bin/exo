#!/usr/bin/env ruby

require_relative '../lib/exosuit'

def puts_instances(instances)
  instances.each do |instance|
    puts '-' * 40
    puts Exosuit::Instance.to_s(instance)
  end
end

def puts_running_instances
  puts_instances(Exosuit::Instance.running)
  puts
end

case ARGV[0]

when 'launch', 'l'
  Exosuit.launch_instance
when 'terminate', 't'
  puts_running_instances
  Exosuit.terminate
when 'instances', 'i'
  puts_instances(Exosuit::Instance.running)
when 'instances:all'
  puts_instances(Exosuit::Instance.all)
when 'dns'
  puts Exosuit.public_dns_names
when 'ssh'
  puts_running_instances
  Exosuit.ssh
when 'initialize'
  puts_running_instances
  Exosuit.initialize
when 'open'
  Exosuit.open
when '--version', 'version', '-v'
  puts Exosuit::VERSION

else
  puts Exosuit::Help.help_text
end
